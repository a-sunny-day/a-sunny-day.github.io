(this["webpackJsonpreact-pwa"]=this["webpackJsonpreact-pwa"]||[]).push([[0],{11:function(e,n,t){},20:function(e,n,t){e.exports=t(37)},31:function(e,n,t){},32:function(e,n,t){},33:function(e,n,t){},34:function(e,n,t){},35:function(e,n,t){},36:function(e,n,t){},37:function(e,n,t){"use strict";t.r(n);var o=t(0),a=t.n(o),c=t(4),r=t.n(c),i=t(3),l=t(12),s=t(6),u=t(13);function d(e){return{type:"SET_USERINFO",payload:e}}function m(e){return{type:"SET_MEETING_VIEW",payload:e}}var f="/join",g="/",h={isDuringMeeting:!1,meetingCurrentView:g,userInfo:null,lastJoinName:"",meetingHistoryList:[],isShowingNotifyUserInstallUI:!1},p=Object(u.a)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h,n=arguments.length>1?arguments[1]:void 0;switch(n.type){case"SET_USERINFO":e.userInfo=null==n.payload?null:Object(s.a)({},n.payload);break;case"IS_DURING_MEETING":e.isDuringMeeting=n.payload;break;case"SET_MEETING_VIEW":e.meetingCurrentView=n.payload;break;case"SET_SHOW_NOTIFY_USER_INSTALL":e.isShowingNotifyUserInstallUI=!!n.payload;break;default:return e}})),w=Object(i.d)(p,Object(i.c)(Object(i.a)(l.a),window.devToolsExtension?window.devToolsExtension():function(e){return e})),v=t(1),b=(t(31),t(2)),E=(t(32),t(33),t(15)),j=t(16),k=t(5),N=t(18),C=t(19),I=(t(34),t(17)),y=t.n(I),O=function(e){Object(C.a)(t,e);var n=Object(N.a)(t);function t(e){var o;return Object(E.a)(this,t),(o=n.call(this,e)).state={text:"",checked:!0},o.onChange=o.onChange.bind(Object(k.a)(o)),o}return Object(j.a)(t,[{key:"onChange",value:function(e){console.log(e.target.checked),this.setState({checked:e.target.checked})}},{key:"render",value:function(){return a.a.createElement("label",{className:y()("zm-checkbox-container",this.props.containerClass)},this.props.text,a.a.createElement("input",{type:"checkbox",checked:this.state.checked,onChange:this.onChange}),a.a.createElement("span",{className:"check-mark"}))}}]),t}(a.a.Component);function S(e){var n=(e=(e+="").replace(/-/g,"").split("")).length;return n<=3||(n>3&&n<=6?e.splice(3,0,"-"):n<=10?(e.splice(3,0,"-"),e.splice(7,0,"-")):n<=11&&(e.splice(3,0,"-"),e.splice(8,0,"-"))),e.join("")}function M(e){var n,t=/https?:\/\/([^/]+)/gi.exec(e);return t&&t.length&&(n=t[0]),n}function T(e){e+="";for(var n=0,t=0;t<e.length;t++)n+=e.charCodeAt(t),n%=8;return n}var _="/signin?from=".concat("pwa"),x="/start/videomeeting?from=".concat("pwa");var U=Object(v.b)(null,(function(e,n){return{onCancel:function(){e(m(g))},joinMeeting:function(e,n){window.location.href=function(e,n){var t="".concat(M(window.location.href),"/wc/").concat(e,"/join"),o=[];for(var a in n)n.hasOwnProperty(a)&&o.push("".concat(a,"=").concat(n[a]));return(o=o.join("&")).length>0&&(o="?"+o),"".concat(t).concat(o)}(e,{joinName:n})}}}))((function(e){var n=e.onCancel,t=e.joinMeeting,c=Object(o.useState)(""),r=Object(b.a)(c,2),i=r[0],l=r[1],s=Object(o.useState)(""),u=Object(b.a)(s,2),d=u[0],m=u[1],f=/^\d{9,11}$/.test(i),g=d.trim().length>0&&d.trim().length<=70,h=function(){if(f&&g){var e=i.replace(/-/g,"");console.group("join meeting"),console.log("meeting id is %s",i),console.log("join name is %s",d),console.groupEnd(),t(e,d)}},p=function(e){"Enter"===e.key&&h()};return a.a.createElement("div",{className:"join"},a.a.createElement("h2",{className:"join-header"},"Join Meeting"),a.a.createElement("div",{className:"join-form"},a.a.createElement("input",{type:"text",className:"join-meetingId",placeholder:"Meeting ID",value:S(i),onChange:function(e){var n=e.target.value.toLowerCase();n=n.replace(/[-\s]/g,""),/^\d{0,11}$/.test(n)&&l(n)},onKeyDown:p}),a.a.createElement("input",{type:"text",className:"join-joinName",placeholder:"Screen Name",value:d,onChange:function(e){var n=e.target.value;n.length<=70&&m(n)},onKeyDown:p}),a.a.createElement(O,{containerClass:"join-connect-audio",text:"Remember my name for future meetings",checked:!1,onChange:function(e){console.log(e)}}),a.a.createElement(O,{containerClass:"join-connect-audio",text:"Do not connect to audio",checked:!1,onChange:function(e){console.log(e)}}),a.a.createElement(O,{containerClass:"join-off-video",text:"Turn off my video",checked:!1,onChange:function(e){console.log(e)}})),a.a.createElement("footer",null,a.a.createElement("button",{disabled:!(f&&g),className:"btn-join",onClick:h},"Join"),a.a.createElement("button",{className:"btn-cancel",onClick:n},"Cancel")))}));t(11),t(35);function W(e){var n=e.userInfo,t=e.logout;return a.a.createElement("div",{className:"home-header"},n.avatar&&a.a.createElement("img",{src:n.avatar||"",className:"home-header-avatar",alt:"user avatar"}),!n.avatar&&a.a.createElement("span",{className:"home-header-name-abbr bgColor".concat(T(n.displayName))},n.displayName.split(" ").map((function(e){return e[0]})).join("")||"."),a.a.createElement("span",{className:"home-header-name"},n.displayName),a.a.createElement("span",{className:"home-header-logout",onClick:t},"Logout"))}var L=Object(v.b)((function(e){return{userInfo:e.userInfo}}),(function(e){return{joinMeeting:function(){e(m(f))},signIn:function(){window.location.href="".concat(M(window.location.href)).concat(_)},startMeeting:function(){window.location.href="".concat(M(window.location.href)).concat(x)},logout:function(){e(d(null))}}}))((function(e){var n=e.userInfo,t=e.signIn,o=e.startMeeting,c=e.joinMeeting,r=e.logout;return a.a.createElement("div",{className:"home"},n&&a.a.createElement(W,{userInfo:n,logout:r}),a.a.createElement("div",{className:"home-logo"}),a.a.createElement("div",{className:"btns-home"},n&&a.a.createElement("button",{className:"btn btn-block btn-home-start",onClick:o},"Start Meeting"),a.a.createElement("button",{className:"btn btn-block btn-home-join",onClick:c},"Join Meeting"),!n&&a.a.createElement("button",{className:"btn btn-block btn-home-signin",onClick:t},"Sign In")))}));t(36);function D(){var e=Object(o.useRef)(null),n=Object(o.useState)(!0),t=Object(b.a)(n,2),c=t[0],r=t[1],i=Object(o.useCallback)((function(n){if(n.preventDefault(),!window.sessionStorage.getItem("noPrompt"))return e.current=n,function(){window.removeEventListener("beforeinstallprompt",i)}})),l=Object(o.useCallback)((function(){e.current.prompt(),e.current.userChoice.then((function(e){console.log("install pwa result: ",e)})).catch((function(e){console.log("install prompt error: ",e)})),r(!1),window.sessionStorage.setItem("noPrompt",!0)})),s=Object(o.useCallback)((function(){r(!1),window.sessionStorage.setItem("noPrompt",!0)}));return Object(o.useEffect)((function(){window.addEventListener("beforeinstallprompt",i)}),[]),c&&a.a.createElement("div",{className:"install-popup"},a.a.createElement("div",null,"You can add me to desktop now."),a.a.createElement("div",{className:"install-btns"},a.a.createElement("button",{onClick:l,className:"btn-install"},"Install"),a.a.createElement("button",{onClick:s},"Later")))}function P(e,n){return window.fetch(e,Object(s.a)({method:"GET",credentials:"same-origin"},n))}var R=function(){return function(e,n){return P("/get_profile_for_pwa",{headers:{}}).then((function(e){return e.json()})).then((function(n){return 0===n.errorCode?(e(d(n.result)),!0):201===n.errorCode?(e(d(null)),Promise.reject(n.errorMessage)):void 0})).catch((function(n){e(d(null)),console.log(n)}))}};var V=Object(v.b)((function(e){return{meetingCurrentView:e.meetingCurrentView,userInfo:e.userInfo}}))((function(e){var n=e.meetingCurrentView,t=e.userInfo,c=e.dispatch,r=Object(o.useState)(!1),i=Object(b.a)(r,2),l=(i[0],i[1]);return Object(o.useEffect)((function(){window.matchMedia("(display-mode: standalone)").matches||!0===window.navigator.standalone?l(!1):sessionStorage.getItem("noNotify")||l(!0)}),[]),Object(o.useEffect)((function(){console.log(t),t||c(R())}),[]),a.a.createElement(a.a.Fragment,null,a.a.createElement("div",{className:"app"},n===f&&a.a.createElement(U,null),n===g&&a.a.createElement(L,null)),a.a.createElement(D,null))})),G=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function J(e,n){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var t=e.installing;null!=t&&(t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?n&&n.onUpdate&&n.onUpdate(e):(console.log("Content is cached for offline use."),n&&n.onSuccess&&n.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}(window.matchMedia("(display-mode: standalone)").matches||!0===window.navigator.standalone)&&window.resizeTo(600,370),r.a.render(a.a.createElement(v.a,{store:w},a.a.createElement(a.a.StrictMode,null,a.a.createElement(V,null))),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL(".",window.location.href).origin!==window.location.origin)return;window.navigator.serviceWorker.addEventListener("message",(function(e){e.data&&"SW.UPDATE"===e.data.type&&(console.log("service worker has updated and user confirmed to reload the page; to reload."),window.location.reload())})),window.addEventListener("load",(function(){var n="".concat(".","/service-worker.js");G?(!function(e,n){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(t){var o=t.headers.get("content-type");404===t.status||null!=o&&-1===o.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):J(e,n)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(n,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker.")}))):J(n,e)}))}}({onUpdate:function(e){var n=window.confirm("New content is avaliable, would you like to reload the page to use the new content?");console.log("user action: ",n),n&&(console.log("user confirmed to reload"),e.waiting&&e.waiting.postMessage({type:"SW.SKIP_WAITING"}))}})}},[[20,1,2]]]);
//# sourceMappingURL=main.928f46ea.chunk.js.map